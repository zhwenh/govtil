#!/bin/bash

# prerequisites:
CN=govtil
# sudo apt-get install lxc # for host
# sudo lxc-create -n $CN -f lxc.conf
# sudo chroot /var/lib/lxc/$CN/rootfs apt-get update -qqy
# sudo chroot /var/lib/lxc/$CN/rootfs apt-get install -qqy lxc # for container

# run with:
# sudo lxc-execute -n $CN -f lxc.conf -- echo hello world

lxc.utsname = $CN

# no network, loopback only
lxc.network.type = empty

# do this for a real network
# lxc.network.type = veth
# lxc.network.flags = up
# lxc.network.link = br0
# lxc.network.name = eth0
# lxc.network.hwaddr = 4a:49:43:49:79:bd
# use 0.0.0.0 below for DHCP
# lxc.network.ipv4 = 192.168.250.150S

# file system
# lxc.rootfs = /var/lib/lxc/$CN/rootfs
# lxc.mount = path_to/fstab
# lxc.mount.entry = /home/vsekhar/chroot/dev/pts devpts defaults 0 0
# lxc.mount.entry = /home/vsekhar/chroot/proc    proc   defaults 0 0
# lxc.mount.entry = /home/vsekhar/chroot/sys     sysfs  defaults 0 0

# drop some capabilities
# lxc.cap.drop = sys_admin # needed by lxc-init (and thus lxc-execute)
# lxc.cap.drop = sys_boot
# lxc.cap.drop = sys_chroot
# lxc.cap.drop = sys_module
# lxc.cap.drop = sys_ptrace
# lxc.cap.drop = sys_rawio
# lxc.cap.drop = sys_resource

# lxc.cap.drop = mknod # needed by 
# lxc.cap.drop = setuid
lxc.cap.drop = net_admin net_raw
lxc.cap.drop = mac_override

# workaround for https://bugs.launchpad.net/ubuntu/+source/lxc/+bug/981955
lxc.aa_profile = unconfined
